# Gmail AI Reply Assistant

Gmail の返信欄に合わせて返信案を生成し、クリップボードにコピーする Chrome 拡張機能です。プリセットプロンプトと API キーは拡張内で保存できます。

## 機能
- 拡張ボタンを押したときに Gmail 上の返信欄を検知し、返信対象メールの本文を取得
- 返信欄が開いていない場合は設定タブのみを表示
- 返信欄が開いている場合は対象メールの全文を表示し、返信案を生成して即コピー
- プリセットプロンプトと API キーを保存・変更可能

## セットアップ
1. `.env`（任意）にローカル用の `OPENAI_API_KEY` をメモできます（拡張の実使用ではポップアップで設定）。
2. Chrome で `chrome://extensions` を開き、デベロッパーモードをオン。
3. 「パッケージ化されていない拡張機能を読み込む」でこのディレクトリを選択。

## 使い方
1. Gmail を開き、返信したい箇所の返信欄を開く（スレッド途中の返信も可）。
2. 拡張アイコンをクリック。
   - 返信欄が開いていない場合: 設定タブのみ表示。
   - 返信欄が開いている場合: 対象メールの本文全文を表示し、返信案を生成可能。
3. 設定タブで API キーとプリセットプロンプトを保存。
4. 返信タブで「生成してコピー」を押すと、OpenAI Responses API（デフォルト `gpt-5-nano`）で返信案を生成し、クリップボードにコピー。

## ファイル構成
- `manifest.json` — MV3 マニフェスト。
- `contentScript.js` — Gmail で返信欄と対象メール本文を検出し、コンテキストを返却。
- `popup.html` / `popup.css` / `popup.js` — ポップアップ UI と設定・生成ロジック。
- `.gitignore` — 不要ファイル除外。
- `.env` — ローカルメモ用の API キー入れ物（Git から除外）。

## メモ・制限
- 通信は `https://api.openai.com/v1/responses` に直接送ります。プロキシや別ベンダーを使う場合は `popup.js` を調整してください。
- `gpt-5-nano` は `temperature` パラメータ非対応なので、リクエストに含めていません（Responses API の `reasoning.effort` は `minimal` に固定）。
- Gmail の DOM 変更に依存しています。もし返信欄検知や本文取得が崩れた場合は、`contentScript.js` のセレクタを更新してください。
- 返信案はテキストのみをコピーします。エディタへの自動挿入は行いません。
